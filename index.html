<!doctype html>
Autor - TimWhite
<html>
<head>
	<meta charset="utf-8">
	<title>千幽Chiyuu按钮</title>
	<link rel="stylesheet" rev="stylesheet" href="style.css" type="text/css" media="all" />
	<script>
		var voiceName = new Array("sigh","AhEastEight","Doshite","WTFF","Kugimiya_Combo","Fury","Fxxk","FxxkU"); //for random play
		var multi = false;		//control param for multiple player
		var song = false;		// control param for song (if true, the route will add sth)
		var eleID = "";			// store the sounds names
		var HDActive = false;	//If true, higher qulity song will be play
		var countaudio = 0;		// count the how many audios was played together and record the maximum
		
		function playsound(){
			var button = document.getElementById(eleID);
			var audio = document.getElementById("music");
			var songname = document.getElementById("songName");
			var audiosrc ;
			if (HDActive){		//Higer qulity song
				if(song){audiosrc = "SpiritSound/" +eleID + "_HD.ogg";}		
			}
			else{
				audiosrc = "SpiritSound/" +eleID + ".mp3";
			}
			if (multi){			//multiple sounds play together
				multiplayer(audiosrc,countaudio);
				countaudio = countaudio + 1;
			}
			else{				//simple play the sound
				audio.src = audiosrc;
				if(audio.paused){                 
					audio.play();
				}
				else{
					audio();
				} 
			}
			songname.innerHTML = "现在播放：" + button.innerHTML;	//record the sound name now playing
		}
		
		function multiplayer(src, playerNum)
		{
			var audio = new Audio()
			audio.id = "soundplayer" + playerNum;
			audio.controls = true;
			audio.preload = true;
			audio.hidden = true;
			audio.onpause = "resetName()";
			audio.src = src;
			audio.play();
			document.body.appendChild(audio)
		}
		
		function voiceControl(butID){		//play sound clip
			eleID = butID;
			song = false;
			playsound();
		}
		
		function songControl(butID){		//play songs
			eleID = butID;
			song = true;
			playsound();
		}
		
		function multiPlayerAct(){			//if multiplayer true change the params
			if (multi){
				multi = false;
				eleStateColor("multi","#E8779F");
			}
			else{
				multi = true;
				eleStateColor("multi","#cc225f");
			}
		}
		
		function switchHD(){				// if HD is true chang reletive params
			if (HDActive){
				HDActive = false;
				eleStateColor("HD","#E8779F");
			}
			else{
				HDActive = true;
				eleStateColor("HD","#cc225f");
			}
		}
		
		function eleStateColor(ElementID,eleColor){			//if the button was selected change its color
			var element = document.getElementById(ElementID);
			element.style.borderColor=eleColor;
			element.style.backgroundColor=eleColor;
		}
		
		function voiceStop(){				//stop all sounds now playing
			var audio = document.getElementById("music");
			var songname = document.getElementById("songName");
			var multiplayer ;
			var playerID;
			audio.src="";
			songname.innerHTML = "";
			if (multi){						//stop multiplaying sounds
				for(var i = 0;i < countaudio; i++){
					playerID = "soundplayer" + i;
					multiplayer = document.getElementById(playerID);
					multiplayer.src = "";
				}
				countaudio = 0;
			}
		}
		
		function randomVoice(){				//randomly play a sound(need to fix)
			var RandomNumber = Math.floor(Math.random()*8);
			voiceControl(voiceName[RandomNumber]);
		}
		
		function voiceLoop(){				//if true the sound play will loop
			var audio = document.getElementById("music");
			if (audio.loop){
				audio.removeAttribute("loop");
				eleStateColor("loop","#E8779F");
			}
			else{
				audio.loop = true;
				eleStateColor("loop","#CC255F");
			}
		}
		
		function resetName(){				// when sound playing was stoped reset the sound name now playing
			var songname = document.getElementById("songName");
			songname.innerHTML = "";
		}
		
		</script>
	</head>

<body style="background-color:#F9EFF5">
	
	<script src = "https://code.jquery.com/jquery-3.3.1.min.js" ></script>
	<script>
		var browser = (function BrowserVersion(agent) {		//check browse if IE/Edge shutdown the function 1.Now playing sound name record;2.random play
			switch (true) {
				case agent.indexOf("edge") > -1: return "edge";
				case agent.indexOf("edg") > -1: return "chromium based edge (dev or canary)";
				case agent.indexOf("opr") > -1 && !!window.opr: return "opera";
				case agent.indexOf("chrome") > -1 && !!window.chrome: return "chrome";
				case agent.indexOf("trident") > -1: return "ie";
				case agent.indexOf("firefox") > -1: return "firefox";
				case agent.indexOf("safari") > -1: return "safari";
				case agent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera: return "IE";
				default: return "other";
			}
			})(window.navigator.userAgent.toLowerCase());
		$(document).ready(function(){	
			switch (browser){
				case "ie" : 
					alert("因IE潜在的兼容性问题，网页部分功能暂停使用");
					$("#bottomsign").remove();
					//$("#randomplay").remove();
					//$("#readrandom").remove();
					break;
				case "edge":
					alert("因Edge潜在的兼容性问题，网页部分功能暂停使用");
					$("#bottomsign").remove();
					//$("#randomplay").remove();
					//$("#readrandom").remove();
					break;

			}
		})
		</script>
	
	<div>
        <div class="hidden_box" title="这是一个安静的控制器">
			<label for="label1"></label>
			<input type="checkbox" id="label1" >
			<div class="hidden_show">
				<ul>
					<li class="hide">
						<button class="picbutton" id = "loop" onclick="voiceLoop()" style="background-image: url(Img/DoNotStop.png);" title="不要停下来啊(指单曲循环)"></button>
						</li>
					<li class="hide" id = "randomplay">
						<button class="picbutton" id="random" onclick="randomVoice()" style="background-image: url(Img/random.png);" title ="随机一个音声"></button>
						</li>
					<li class="hide">
						<button class="picbutton" id="multi" onclick="multiPlayerAct()" style="background-image: url(Img/multi.png);" title="声音重叠"></button>
						</li>
					<li class="hide">
						<button class="picbutton" id="stop" onclick="voiceStop()" style="background-image: url(Img/stop.png);" title="停止播放"></button>
						</li>
					</ul>
				</div>
    		</div>
		</div>
	<div>
		<audio controls="controls" preload id="music" hidden onPause="resetName()"></audio>
		</div>
	<div id="nav">
		<ul id="navgation">
			<li class="navg">
				 <input type="button" class="pic" style="background-image: url(Img/flower.png);">
				</li>
			<li class="navg">
				<span class="titletext">幽按钮</span>
				</li>
			<li class="navg">
				<a href="https://space.bilibili.com/690608691"  target="_blank">
					<button class="picbutton" style="width: 132px; margin-left: 10px; border-radius: 10px;" title="千幽Chiyuu">
					<li><img src="Img/board.png" style="width: 32px;height: 32px" alt="??"></li>
					<li style="padding-top: 6px;"><span>千幽Chiyuu</span></li>
					</button>
					</a>
				</li>
			<li class="navg">
				<a href="https://space.bilibili.com/99075788" target="_blank">
					<button class="picbutton" style="width: 180px; margin-left: 5px; border-radius: 10px;" title="千幽的暗黑交友部">
						<li><img src="Img/erchuang.png" style="width: 32px;height: 32px" alt="??"></li>
						<li style="padding-top: 6px"><span>千幽的暗黑交友部</span></li>
				</button></a>
				</li>
			</ul>
			
		</div>
	<div id="main" style="align: center">
		<div class="subTitle">
			<div class="readmehide_box" style="align: center">
				<label for="label2"><span>ReadMe</span></label>
				<input type="checkbox" id="label2">
				<div class="hidden_show">
					<ul>
						<li class="readme_innerbox">
							<img class="picbutton" style="width:32px;height:32px;background-image: url(Img/control.png);">
							<span class="readmetext">
								控制台 里面是音频控制选项
								</span>
							</li>
						<li class="readme_innerbox" >
							<img class="picbutton" style="width:32px;height:32px;background-image: url(Img/DoNotStop.png);">
							<span class="readmetext">打开洗脑循环</span>
							</li>
						<li class="readme_innerbox" id="readrandom">
							<img class="picbutton" style="width:32px;height:32px;background-image: url(Img/random.png);">
							<span class="readmetext">随机选择一个音频播放</span>
							</li>
						<li class="readme_innerbox">
							<img class="picbutton" style="width:32px;height:32px;background-image: url(Img/multi.png);">
							<span class="readmetext">允许同时播放多个声音</span>
							</li>
						<li class="readme_innerbox">
							<img class="picbutton" style="width:32px;height:32px;background-image: url(Img/stop.png);">
							<span class="readmetext">停止播放</span>
							</li>
						<span class="readmetext" style="width:auto;">不保证所有声音音量相同 不排除会有耳膜撕裂者 请谨慎使用大音量 XD</span>
						<span class="readmetext" style="width:auto;">随机播放暂时出现问题 在修了在修了</span>
						</ul>
					</div>
				</div>
			</div>
		<div class="subTitle">
			<span>幽歌</span>
			<span class="msghide_box" title="隐藏功能 ; )">
				<label for="label3" style="	"></label>
				<input type="checkbox" id="label3" >
				<div class="hidden_show">
					<ul>
						<li class="subTitle_innerbox">选中下面按钮可以倾听高清版幽歌(会消耗较多流量) </li>
						<li>
							<button class="button" style="margin=0px;background-color: #E8779F;" onclick="switchHD()" id="HD">高清幽歌</button>
							</li>
						</ul>
					</div>
				</span>
			<div class="content">
				<button class="button" onclick="songControl(this.id)" id="幽歌/twinklenight">Twinkle Night</button>
				<button class="button" onclick="songControl(this.id)" id="幽歌/timebox">时光盲盒</button>
				</div>
			</div>
		<div class="subTitle">
			<span>语气</span>
			<div class="content">
				<button class="button" onclick="voiceControl(this.id)" id="sigh">生活不易，千幽叹气</button>
				<button class="button" onclick="voiceControl(this.id)" id="AhEastEight">阿西吧</button>
				<button class="button" onclick="voiceControl(this.id)" id="Doshite">千幽疑问</button>
				<button class="button" onclick="voiceControl(this.id)" id="neeeeee">neeeeee</button>	
				<button class="button" onclick="voiceControl(this.id)" id="Duixian">你瞧不起谁呐</button>
				</div>
			</div>
		<div class="subTitle">
			<span>礼物</span>
			<div class="content">
				<button class="button" onclick="voiceControl(this.id)" id="舰长">舰长</button>
				<button class="button" onclick="voiceControl(this.id)" id="舰长(高速ver)">舰长(高速ver)</button>
				<button class="button" onclick="voiceControl(this.id)" id="喵娘_New">喵娘</button>
				<button class="button" onclick="voiceControl(this.id)" id="吃瓜">吃瓜</button>
				<button class="button" onclick="voiceControl(this.id)" id="凉了">凉了</button>
				</div>
			</div>
		<div class="subTitle">
			<span style="margin: 5px;">可爱</span>
			<div class="content">
				<button class="button" onclick="voiceControl(this.id)" id="WTFF">我的花花</button>
				<button class="button" onclick="voiceControl(this.id)" id="Kugimiya_Combo">钉宫三连(愤怒ver)</button>
				<button class="button" onclick="voiceControl(this.id)" id="Kugimiya_chagrin">钉宫三连(委屈ver)</button>
				<button class="button" onclick="voiceControl(this.id)" id="Fury">无能狂怒</button>
				<button class="button" onclick="voiceControl(this.id)" id="Fxxk">Fxxk</button>
				<button class="button" onclick="voiceControl(this.id)" id="FxxkU">FxxkU</button>
				<button class="button" onclick="voiceControl(this.id)" id="baka">Baka×3</button>
				<button class="button" onclick="voiceControl(this.id)" id="DiedGhost">死鬼~</button>
				<button class="button" onclick="voiceControl(this.id)" id="Stretch">千幽伸懒腰</button>
				<button class="button" onclick="voiceControl(this.id)" id="sneeze1">喷嚏1</button>
				<button class="button" onclick="voiceControl(this.id)" id="sneeze2">喷嚏2</button>
				<button class="button" onclick="voiceControl(this.id)" id="阳间人是大笨蛋">阳间人是大笨蛋</button>
				<button class="button" onclick="voiceControl(this.id)" id="哼哈">哼哈~</button>
				<button class="button" onclick="voiceControl(this.id)" id="唉嘿">唉嘿~</button>
				<button class="button" onclick="voiceControl(this.id)" id="喵(30s耐久)">喵~(30s耐久ver)</button>
				<button class="button" onclick="voiceControl(this.id)" id="千幽拒绝)">千幽拒绝</button>
				</div>
			</div>
		<div class="subTitle">
			<span style="margin: 5px;">草</span>
			<div class="content">
				<button class="button" onclick="voiceControl(this.id)" id="ChiyuuHender">我是千幽亨德尔</button>
				<button class="button" onclick="voiceControl(this.id)" id="bakax3">Baka×3</button>
				<button class="button" onclick="voiceControl(this.id)" id="RUA">RUA</button>
				<button class="button" onclick="voiceControl(this.id)" id="Goodnight" title="左右横跳注意">千幽の晚安</button>
				<button class="button" onclick="voiceControl(this.id)" id="波纹呼吸">波纹呼吸</button>
				<button class="button" onclick="voiceControl(this.id)" id="恋口上">恋口上</button>
				<button class="button" onclick="voiceControl(this.id)" id="烧水千幽" title="百变千幽">烧水千幽</button>
				<button class="button" onclick="voiceControl(this.id)" id="拖拉机" title="百变千幽">拖拉机启动</button>
				</div>
			</div>
		</div>		
	
	<div class="bottomsign" style=" align-content: center; margin: auto; padding: auto" id ="bottomsign">
		<p class="readmetext" id="songName"></p>
		</div>
			
	<footer class="footer">
		<div>
			<ul>
				<li style="font-size: 16px; padding-top: 6px; padding: 10px;"><a herf="https://github.com/Tim120702" target="_blank">网站仓库</a> </li>
					<a href="https://github.com/Tim120702/Chiyuu_Button" target="_blank" style="margin-left: 5px; width:24px;height:24px;">
						<input type="button" class="picbutton" style="background-image: url(Img/github.png);background-color: transparent;border-color: transparent;width:24px;height:24px;">
						</a>
				</ul>
			<br>
			<p style="font-size: 16px; padding: 2px 10px;">本站为爱好者作品，和VR官方没有关联。</p>
			<p style="font-size: 16px; padding: 2px 10px;">若您有任何建议或者问题，请点此联系我
				<a href="https://github.com/Tim120702/Chiyuu_Button/issues" target="_blank" style=" width:24px; height:24px;" title="Github Issue">
					<input type="button" class="picbutton" style="background-image: url(Img/issue.png);background-color: transparent;border-color: transparent;width:24px;height:24px;" >
					</a>
				<a href="https://gitee.com/TimWhite/Chiyuu_Button/issues" target="_blank" style=" width:24px; height:24px;" title="Gitee Issue">
					<input type="button" class="picbutton" style="background-image: url(Img/Issue2.png);background-color: transparent;border-color: transparent;width:24px;height:24px;" >
					</a>
				</p>
			</div>
		</footer>
		
	</body>
	</html>
